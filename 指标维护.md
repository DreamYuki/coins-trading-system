## 维护BUG、更新记录

### 2021-02-20以前

- [x] 累计运行时间实时保存 - 功能；
- [x] 保本交易 - 功能；
- [x] 消息提示铃声 - 功能；
- [x] 涨速=（现价 /上一次现价- 1）*1000‰ - 功能；
- [x] 总资产、累计触发未能及时更新，与browser有关 - bug；
- [x] 强制平仓后避免再次误买入--和抄底买入相悖 - 功能。

### 2021-02-23

- [x] 撤单操作和方案 - 功能；
- [x] js内存泄漏——Chromium内存随时间不断增长 - bug（修复：减少了page的数量，定期重启）；
- [ ] 轮询顺序买入方案 --> 最优买入方案 - 功能；
- [ ] 持续盈利策略。

### 2021-02-27

- [x] 部分成交下检测不到交易方向漏洞；
- [x] 触及1分钟线上轨过早抛出、触及下轨过早买入的问题——考察更高时间粒度，待回测验证；
- [x] 累计运行、累计触发莫名NaN（可能是人为造成，待观察）；

### 2021-03-02

- [x] 买入指标修正：(low - Number(BOLL_1min[2]) <= 0) -->  (low - Number(_BOLL_1min[2]) * 0.999 <= 0)；
- [x] 实现项目自动重启功能——减少服务端拒绝访问、内存泄漏宕机风险；

### 2021-03-03

- [x] 买入指标下调：由-0.1%下调至-0.3%，

  (low - Number(BOLL_1min[2]) * 0.999 <= 0) -->  (low - Number(_BOLL_1min[2]) * 0.997 <= 0)

- [x] 卖出指标上调：由0.5%上调至1.5%，

  (sellPrice * 0.995 > basePrice) --> (sellPrice * 0.975 > basePrice)

- [ ] 行情群跌现象阻止买入——新增主要指数级监控；![image-20210303003947216](C:\Users\Administrator.win10-2020HODKP\AppData\Roaming\Typora\typora-user-images\image-20210303003947216.png)

- [x] 两个交易周期之间间隔10分钟，避免多空转换风险；

- [x] log记录当日触发次数应每次存储，否则会因重启而记录不准确；

- [x] 初始运行占用内存230M，随后chromium内存泄漏，直至吃完所有剩余内存至服务器卡死；node初始90M，随后95M，也存在内存泄漏——page.reload()

### 2021-03-04

- [x] 卖出指标回归到0.5%；
- [x] 买卖指标由1minBOLL参考 --> 15minBOLL参考；
- [x] 买入指标上调至0.0%；
- [x] BOLL15min比例调整，k=10；
- [x] 降低上轨触及难度：(high * 1.002 - Number(_BOLL_15min[0]) >= 0)  --> (high * 1.008 - Number(_BOLL_15min[0]) >= 0)

### 2021-03-07

### 未来项目维护的大方向：朝着买卖灵活化、盈利小幅化、应对情景化的交易模式转变

### 2021-03-08

- [ ] 引入BOLL带宽度参数：在触及下轨，且BOLL带宽度很宽时，抄底效果明显！
- [ ] BOLL宽度相对平稳时，触及下轨条件宽松，1.000附近；BOLL宽度相对波动时，触及下轨条件严格，0.999~0.98！
- [ ] 另外，均线走势也可以预测是否行情大跌；

### 2021-03-09

- [ ] 前20的买卖深度数据，订单数求和。看多方支撑和空方压力情况，决定（空转平衡即将多时）适合买入||（多转平衡即将空时）改变既定策略及时卖出————进一步降低风险
- [x] 卖出点由1.008下调至1.006；买入点由1.000下调至0.997；
- [x] 修复Bug：reload后未重新点击“隐藏已撤销”；
- [x] 更新了历史委托相关的selector的查找（原因是官方更新了HTML结构）；
- [x] 卖出后冷却时间由600秒增加至1200秒；
- [ ] 痛心：今日由3个点盈利变成-1亏损，还应该由涨速决定卖出指标，卖出指标应该更灵活！

### 2021-03-10

- [x] 新增“历史委托”更新阀，进一步优化性能。服务器内存占用由1.4G最高，下降至700M；15分钟负载由2.31降至1.57

- [x] 更新了输出的样式，改为表格条件带颜色输出；

- [ ] 涨速计算结果仍有问题；

- [x] 新增卖出策略：阶梯保留收益，回落到前一阶梯时卖出；同时将BOLL卖出指标下降至1.000；

  ​     // 最大化盈利卖出

  ​     // 如果浮盈超过1%，则记录每次最高浮盈，

  ​     // 当回调超过0.3%时，卖出保证不错过最大盈利，

  ​     // 旨在弥补BOLL未触轨造成的由盈转亏风险

## 赚钱速度保持原则

0.27%纯利润/10分钟；

扣除买卖前后手续费0.1%，至少需盈利：0.471%

  --买入信号发出到实际操作存在时间延迟，价格波动会在0.3-0.5%

故应设定赚钱效率目标为：0.771%/10分钟~0.971%/10分钟；

对应涨速：0.08%/分~0.1%/分；



## 投资权重决定何时调仓何时继续持有

| 表现     | 具体     | 权重值增加 |
| -------- | -------- | ---------: |
| 触及BOLL | 触及上轨 |            |
|          | 触及中轨 |            |
|          | 触及下轨 |            |
|          |          |            |
|          |          |            |
|          |          |            |
|          |          |            |

## LOG文件记录交易行为和依据，以便回测

